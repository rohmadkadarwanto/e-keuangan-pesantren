"use strict";var __awaiter=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(a,i){function o(t){try{s(r.next(t))}catch(e){i(e)}}function u(t){try{s(r.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?a(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(o,u)}s((r=r.apply(t,e||[])).next())})},__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});const Entitas_1=__importDefault(require("../models/Entitas")),Santri_1=__importDefault(require("../models/Santri"));function createSantri(t,e){return __awaiter(this,void 0,void 0,function*(){try{let{nis:n,nama_santri:r,tanggal_masuk:a,informasi_tambahan_santri:i}=t.body,o=new Date().toISOString().replace(/[^0-9]/g,""),u=`EN${o}`,s=yield Santri_1.default.create({nis:n,kode_entitas:u,nama_santri:r,tanggal_masuk:a,informasi_tambahan_santri:i});yield Entitas_1.default.create({kode_entitas:u,nama_entitas:r,tipe_entitas:"santri"}),e.status(201).json({success:!0,santri:s})}catch(c){console.error("Error:",c),e.status(500).json({error:"Internal Server Error"})}})}exports.default={createSantri};
